<div *ngIf="isTTOrSSComplete == false">
	<h3>Test</h3>

	<div class="col-md-4">
		<label>Mark or UnMark the word: </label>
		<label class="toggle col-sm-8">
    <input type="checkbox" (click)="MarkOrUnmarkQuestion()" name="MarkWord" [(ngModel)]="IsMarked">
    <span class="handle"></span>
  </label>
	</div>

	<div class="col-md-4">
		<label>Dont show this question I know this very well: </label>
		<label class="toggle col-sm-8">
    <input type="checkbox" (click)="DontShowQuestionChecked()" name="DontShowQuestion" [(ngModel)]="IsDontShowQuestion">
    <span class="handle"></span>
  </label>
	</div>
	<div>


		<form action="">
			<p>Your rating of difficulty</p>
			<label class="btn btn-primary active">
    <input type="radio" name="options" [(ngModel)]="questionDifficulty" [value]="3" [checked]="questionDifficulty==1" (change)="RateDifficulty()" checked/> Hard
	</label>


			<label class="btn btn-primary">
    <input type="radio" name="options"  [(ngModel)]="questionDifficulty" [value]="2"  [checked]="questionDifficulty==2" (change)="RateDifficulty()"/> Medium
</label>
			<label class="btn btn-primary">
    <input type="radio" name="options" [(ngModel)]="questionDifficulty" [value]="1"  [checked]="questionDifficulty==3" (change)="RateDifficulty()"/> Easy
</label>


		</form>




		<div class="row question">
			<div class="row ID">
				{{counter0}}<br/> {{test.currentQuestion?.QuestionID}}
				<div *ngIf="test.currentQuestion?.AverageTimeTakenForQuestionForAllUsers.length != 0">
					<br/> Average Time Taken: <b>{{test.currentQuestion?.AverageTimeTakenForQuestionForAllUsers[0].AverageTimeTaken}}</b>

				</div>
				<p>All users rating percentages</p>
				<div *ngFor="let level of currentQuestionDifficultySortArray">
					<div *ngIf="level.DifficultyLevel == 1 && level.DifficultyPercentage != 0"><b>Easy Percentage is {{level.DifficultyPercentage}}</b></div>
					<div *ngIf="level.DifficultyLevel == 2 && level.DifficultyPercentage != 0"><b>Medium Percentage is {{level.DifficultyPercentage}}</b></div>
					<div *ngIf="level.DifficultyLevel == 3 && level.DifficultyPercentage != 0"><b>Hard Percentage is {{level.DifficultyPercentage}}</b></div>


				</div>

				<div>
					<div *ngIf="percentageCorrectIncorrectForCurrentQuestion?.IncorrectPercentage != 0"><b>Incorrect Percentage is {{percentageCorrectIncorrectForCurrentQuestion?.IncorrectPercentage}}</b></div>
					<div *ngIf="percentageCorrectIncorrectForCurrentQuestion?.CorrectPercentage != 0"><b>Correct Percentage is {{percentageCorrectIncorrectForCurrentQuestion?.CorrectPercentage}}</b></div>
				</div>

			</div>

			<div class="row Question">
				<h2>{{test.currentQuestion?.Question}}</h2>
			</div>
			<form action="">
				<div *ngFor="let choice of test.currentQuestion?.FinalFourShuffledChoices">
					<div class="row">
						<input type="radio" [(ngModel)]="userChoiceID" name="choices" [value]="choice.ChoiceID" [checked]="userChoiceID==choice.ChoiceID"
						 (change)="updateAndAddCurrentHit()" /> {{choice.ChoiceText}}
						<!-- <input type="radio" [(ngModel)]="model.sex"  name="sex" value="male">Male<br>-->

					</div>
				</div>
				<br/><br/>
				<div>Selected Radio: {{userChoiceID}}</div>
			</form>

			<br/><br/>
			<button (click)="NextQuestion()">Next</button><br/><br/>
			<br/><br/>
			<h3>Attempt History of you for this question</h3>
			<div *ngFor="let attempt of test.currentQuestion?.Attempts">
				<div class="row">

					<b>Attempt Number: </b> {{attempt.AttemptNumber}} ||

					<b>Test or STudy Session</b> {{attempt.TestOrStudySession}} ||

					<b>You Took: </b> {{attempt.TimeTaken}} Seconds ||

					<b>Your Final answer for the attempt: </b> {{attempt.UserFinalHitAnswer}}.
					<br/><br/>
				</div>
			</div>

			<br/><br/>

			<h3>AUG Notes</h3>
			<div *ngFor="let augnote of test.currentQuestion?.AUGNotes">
				<div class="row">

					<h4>{{augnote.AUGNotePointText}}</h4>
					<br/>
				</div>
			</div>

			<br/><br/>

			<div class="UserNotes">
				<h3>User Notes</h3>
				<div *ngFor="let note of test.currentQuestion?.UserNotes">
					<div class="row">

						<h4>{{note.NoteText}}</h4>
						<br/>
					</div>
				</div>
				<div>
					<button (click)="AddUserNotes()">AddNote</button><br/><br/>
				</div>
				<div *ngIf="addUserNote">
					NoteText: <input type="text" name="userNote" [(ngModel)]="usrNote"> <br>
					<button (click)="SaveUserNotes()">SaveNote</button><br/><br/>
				</div>
			</div>

			<br/><br/>

			<b>Score: </b>{{test?.Score}}

			<br/><br/>

			



		</div>

	</div>
</div>
<div class="col-md-12" *ngIf="isTTOrSSComplete == true">
	<div class="row" style="margin:0 auto;">
		<h2>Immediate Summary Review</h2>
	</div>


	<form action="">

		<label class="btn btn-primary active">
    <input type="radio" name="options" [(ngModel)]="toDisplayISR" [value]="1" [checked]="toDisplayISR==1" (change)="ShowISR()" checked/> Review Incorrect
	</label>


		<label class="btn btn-primary">
    <input type="radio" name="options"  [(ngModel)]="toDisplayISR" [value]="2"  [checked]="toDisplayISR==2" (change)="ShowISR()"/> Review Most Time Taken
</label>
		<label class="btn btn-primary">
    <input type="radio" name="options" [(ngModel)]="toDisplayISR" [value]="3"  [checked]="toDisplayISR==3" (change)="ShowISR()"/> Review Marked
</label>
		<label class="btn btn-primary">
    <input type="radio" name="options"  [(ngModel)]="toDisplayISR" [value]="4"  [checked]="toDisplayISR==4" (change)="ShowISR()"/> Review Correct
</label>

	</form>
	<div *ngIf="toDisplayISR=='1'">
		<div class="row" style="margin:0 auto;">
			<h3>Incorrectly answered Questions</h3>
		</div>
		<div class="MasterDiv" *ngFor="let question of incorrectQuestionsList" style="border:2px solid black;">


			<div>
				<label>Mark or UnMark the word: </label>
				<div *ngIf="question.IsMarked == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsMarked == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>


			<div>
				<label>Show or dont show question: </label>
				<div *ngIf="question.IsDontShowQuestion == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsDontShowQuestion == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>

			<form action="">
				<p>Your rating of difficulty</p>
				<div>
					<div *ngIf="question.HardMediumOrEasy == 3">
						<label class="btn btn-primary active">
    <input type="radio" name="options"  [value]="3"  (change)="ISRRateDifficulty($event.target.getAttribute('value'), $event.target.checked,question)" checked/> Hard
	</label>
					</div>
					<div *ngIf="question.HardMediumOrEasy != 3">
						<label class="btn btn-primary active">
    <input type="radio" name="options"  [value]="3"  (change)="ISRRateDifficulty($event.target.getAttribute('value'), $event.target.checked,question)" /> Hard
	</label>
					</div>
				</div>
				<div>
					<div *ngIf="question.HardMediumOrEasy == 2">
						<label class="btn btn-primary active">
    <input type="radio" name="options"  [value]="2"  (change)="ISRRateDifficulty($event.target.getAttribute('value'), $event.target.checked,question)" checked/> Medium
	</label>
					</div>
					<div *ngIf="question.HardMediumOrEasy != 2">
						<label class="btn btn-primary active">
    <input type="radio" name="options"  [value]="2"  (change)="ISRRateDifficulty($event.target.getAttribute('value'), $event.target.checked,question)" /> Medium
	</label>
					</div>
				</div>
				<div>
					<div *ngIf="question.HardMediumOrEasy == 1">
						<label class="btn btn-primary active">
    <input type="radio" name="options"  [value]="1"  (change)="ISRRateDifficulty($event.target.getAttribute('value'), $event.target.checked,question)" checked/> Easy
	</label>
					</div>
					<div *ngIf="question.HardMediumOrEasy != 1">
						<label class="btn btn-primary active">
    <input type="radio" name="options"  [value]="1"  (change)="ISRRateDifficulty($event.target.getAttribute('value'), $event.target.checked,question)" /> Easy
	</label>
					</div>
				</div>

			</form>

			<div class="row">
				<div class="col-md-11">
					<div class="row">
						{{question.QuestionsAfterUG.Question}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
						<!--Average Time Taken: {{question.QuestionsAfterUG.AverageTimeTakenForQuestionForAllUsers[0].AverageTimeTaken}}-->Your Time Taken: {{question.TimeTaken}} Seconds
						<br/>
					</div>
					<div class="row" *ngFor="let choice of question.QuestionsAfterUG.Choices">
						<div *ngIf="choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID" [ngClass]="{'my-classcorrect': choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID }">
							{{choice.ChoiceText}} {{choice.ChoiceID}}<br/>
						</div>
						<div *ngFor="let incorrectChoiceID of question.IncorrectChoicesChoiceIDArray">
							<div *ngIf="choice.ChoiceID == incorrectChoiceID" [ngClass]="{'my-classincorrect': choice.ChoiceID == incorrectChoiceID}">

								{{choice.ChoiceText}} {{choice.ChoiceID}}<br/>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br/><br/>

	<div *ngIf="toDisplayISR=='2'">
		<div class="row" style="margin:0 auto;">
			<h3>Correctly Answered Questions</h3>
		</div>
		<div class="MasterDiv" *ngFor="let question of mostTimeTakenQuestionsList" style="border:2px solid black;">
			<div>
				<label>Mark or UnMark the word: </label>
				<div *ngIf="question.IsMarked == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsMarked == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>


			<div>
				<label>Show or dont show question: </label>
				<div *ngIf="question.IsDontShowQuestion == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsDontShowQuestion == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>
			<div class="row">
				<div class="col-md-11"> 
					<div class="row">
						{{question.QuestionsAfterUG.Question}}<br/> {{question.TimeTaken}} Seconds<br/>
					</div>
					<div class="row" *ngFor="let choice of question.QuestionsAfterUG.Choices">
						<div *ngIf="choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID" [ngClass]="{'my-classcorrect': choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID }">
							{{choice.ChoiceText}} {{choice.ChoiceID}}<br/>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br/><br/>

	<div *ngIf="toDisplayISR=='4'">
		<div class="row" style="margin:0 auto;">
			<h3>Correctly Answered Questions</h3>
		</div>
		<div class="MasterDiv" *ngFor="let question of correctQuestionsList" style="border:2px solid black;">
			<div>
				<label>Mark or UnMark the word: </label>
				<div *ngIf="question.IsMarked == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsMarked == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>


			<div>
				<label>Show or dont show question: </label>
				<div *ngIf="question.IsDontShowQuestion == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsDontShowQuestion == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>
			<div class="row">
				<div class="col-md-11">
					<div class="row">
						{{question.QuestionsAfterUG.Question}}<br/>
					</div>
					<div class="row" *ngFor="let choice of question.QuestionsAfterUG.Choices">
						<div *ngIf="choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID" [ngClass]="{'my-classcorrect': choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID }">
							{{choice.ChoiceText}} {{choice.ChoiceID}}<br/>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br/><br/>

	<div *ngIf="toDisplayISR=='3'">
		<div class="row" style="margin:0 auto;">
			<h3>Marked Questions</h3>
		</div>
		<div class="MasterDiv" *ngFor="let question of markedQuestionsList" style="border:2px solid black;">
			<div>
				<label>Mark or UnMark the word: </label>
				<div *ngIf="question.IsMarked == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsMarked == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>


			<div>
				<label>Show or dont show question: </label>
				<div *ngIf="question.IsDontShowQuestion == true">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)" checked>
							<span class="handle"></span>
  						</label>
				</div>
				<div *ngIf="question.IsDontShowQuestion == false">
					<label class="toggle col-sm-8">
							<!--<input type="checkbox" value="{{question.QuestionID}}" (click)="ISRMarkOrUnmarkQuestion(question.QuestionID)" name="question.QuestionID" >-->
							<input type="checkbox" id="{{question.QuestionsAfterUG.QuestionID}}" name="{{question.QuestionsAfterUG.QuestionID}}" value="{{question.QuestionsAfterUG.QuestionID}}" (click)="ISRDontShowQuestionChecked($event.target.getAttribute('value'), $event.target.checked,question)">
							<span class="handle"></span>
  						</label>
				</div>
			</div>
			<div class="row">
				<div class="col-md-11">
					<div class="row">
						{{question.QuestionsAfterUG.Question}}<br/>
					</div>
					<div class="row" *ngFor="let choice of question.QuestionsAfterUG.Choices">
						<div *ngIf="choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID" [ngClass]="{'my-classcorrect': choice.ChoiceID == question.QuestionsAfterUG.CorrectChoiceID }">
							{{choice.ChoiceText}} {{choice.ChoiceID}}<br/>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<br/><br/>
	<div>
		<button (click)="SaveTTOrSSAndISRData()">SaveData</button><br/><br/>
	</div>

</div>